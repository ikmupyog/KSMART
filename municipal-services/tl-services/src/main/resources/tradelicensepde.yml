serviceMaps:
 serviceName: tl-services
 mappings:
 - version: 1.0
   description: Persists tradeLicense Pde details in EG_TL_TradeLicense  table
   fromTopic: savepde-tl-tradelicense
   isTransaction: true
   queryMaps:

       - query: INSERT INTO eg_tl_tradelicense( id, accountid,tenantid,tradeName,validfrom,validto,licensetype, financialyear, action, status, createdby, lastmodifiedby, createdtime, lastmodifiedtime, businessservice, applicationtype, workflowcode) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
         basePath: Licenses.*
         jsonMaps:
          - jsonPath: $.Licenses.*.id

          - jsonPath: $.Licenses.*.accountId

          - jsonPath: $.Licenses.*.tenantId

          - jsonPath: $.Licenses.*.tradeName

          - jsonPath: $.Licenses.*.validFrom

          - jsonPath: $.Licenses.*.validTo

          - jsonPath: $.Licenses.*.licenseType

          - jsonPath: $.Licenses.*.financialYear

          - jsonPath: $.Licenses.*.action

          - jsonPath: $.Licenses.*.status

          - jsonPath: $.Licenses.*.auditDetails.createdBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.createdTime

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.businessService

          - jsonPath: $.Licenses.*.applicationType

          - jsonPath: $.Licenses.*.workflowCode



       - query: INSERT INTO eg_tl_tradelicensedetail( id, channel, tradelicenseid, structureType, businesssector, capitalinvestment, enterprisetype, institutionid, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
         basePath: Licenses.*.tradeLicenseDetail
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.channel
            type: JSON

            dbType: JSONB

          - jsonPath: $.Licenses.*.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structureType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.businessSector

          - jsonPath: $.Licenses.*.tradeLicenseDetail.capitalInvestment

          - jsonPath: $.Licenses.*.tradeLicenseDetail.enterpriseType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institutionId

          - jsonPath: $.Licenses.*.auditDetails.createdBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.createdTime

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime


       - query: INSERT INTO eg_tl_owner_pde(id, tenantid, active, tradelicensedetailid, ownername, ownertype, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
         basePath: Licenses.*.tradeLicenseDetail.ownersPde.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownersPde.*.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownersPde.*.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownersPde.*.userActive

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.ownersPde[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownersPde.*.name

          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownersPde.*.ownerType

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.ownersPde[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.ownersPde[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.ownersPde[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.ownersPde[*].id)].auditDetails.lastModifiedTime


       - query: INSERT INTO eg_tl_address( id, tenantid, doorno, tradelicensedetailid, zonalid, wardid, wardno, circledivisionid, lbbuildingcode, lbbuildingname, buildingtype, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
         basePath: Licenses.*.tradeLicenseDetail.address
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.doorNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.zonalId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.wardId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.wardNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.circleDivisionId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.lbBuildingCode

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.lbBuildingName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.buildingType

          - jsonPath: $.Licenses.*.auditDetails.createdBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.createdTime

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime


       - query: INSERT INTO eg_tl_structureplacedetail(id, tenantid, doorno, doorsub, tradelicensedetailid, active, stallno, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ;
         basePath: Licenses.*.tradeLicenseDetail.structurePlace.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.doorNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.doorNoSub

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.stallNo

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.lastModifiedTime


       - query: INSERT INTO eg_tl_taxdetails_pde(id, tenantid, tradelicensedetailid, service, fromyear, fromperiod, toyear, toperiod, headcode, amount, active, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
         basePath: Licenses.*.tradeLicenseDetail.taxPdefinal.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.taxPdefinal.*.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.taxPdefinal.*.tenantId

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.taxPdefinal[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.taxPdefinal.*.service

          - jsonPath: $.Licenses.*.tradeLicenseDetail.taxPdefinal.*.fromYear

          - jsonPath: $.Licenses.*.tradeLicenseDetail.taxPdefinal.*.fromPeriod

          - jsonPath: $.Licenses.*.tradeLicenseDetail.taxPdefinal.*.toYear

          - jsonPath: $.Licenses.*.tradeLicenseDetail.taxPdefinal.*.toPeriod

          - jsonPath: $.Licenses.*.tradeLicenseDetail.taxPdefinal.*.headCode

          - jsonPath: $.Licenses.*.tradeLicenseDetail.taxPdefinal.*.amount

          - jsonPath: $.Licenses.*.tradeLicenseDetail.taxPdefinal.*.active

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.taxPdefinal[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.taxPdefinal[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.taxPdefinal[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.taxPdefinal[*].id)].auditDetails.lastModifiedTime


       - query: INSERT INTO eg_institution(id, institutionid, tenantid, institutionname, active, createdby, createdtime, lastmodifiedby, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?);
         basePath: Licenses.*.tradeLicenseDetail.institutionMaster
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.institutionMaster.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institutionMaster.institutionId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institutionMaster.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institutionMaster.institutionName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institutionMaster.active

          - jsonPath: $.Licenses.*.auditDetails.createdBy

          - jsonPath: $.Licenses.*.auditDetails.createdTime

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime



 - version: 1.0
   description: Update tradeLicense Pde details in EG_TL_TradeLicense  table
   fromTopic: updatepde-tl-tradelicense
   isTransaction: true
   queryMaps:

       - query: UPDATE eg_tl_tradelicense SET tradeName = ?, licenseUnitNameMal = ?, licenseNumber = ?,licensetype = ?, oldlicensenumber = ?, propertyid = ?, oldpropertyid = ?, applicationdate = ?, commencementdate = ?, issueddate = ?, financialyear = ?, validfrom = ?, validto = ?, action = ?, status = ?,  lastmodifiedby = ?,  lastmodifiedtime = ?, businessservice=?,applicationtype=?, workflowcode=?  WHERE id=?;
         basePath: Licenses.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeName

          - jsonPath: $.Licenses.*.licenseUnitNameMal

          - jsonPath: $.Licenses.*.licenseNumber

          - jsonPath: $.Licenses.*.licenseType

          - jsonPath: $.Licenses.*.oldLicenseNumber

          - jsonPath: $.Licenses.*.propertyId

          - jsonPath: $.Licenses.*.oldPropertyId

          - jsonPath: $.Licenses.*.applicationDate

          - jsonPath: $.Licenses.*.commencementDate

          - jsonPath: $.Licenses.*.issuedDate

          - jsonPath: $.Licenses.*.financialYear

          - jsonPath: $.Licenses.*.validFrom

          - jsonPath: $.Licenses.*.validTo

          - jsonPath: $.Licenses.*.action

          - jsonPath: $.Licenses.*.status

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.id

          - jsonPath: $.Licenses.*.businessService

          - jsonPath: $.Licenses.*.applicationType

          - jsonPath: $.Licenses.*.workflowCode


       - query: UPDATE eg_tl_tradelicensedetail SET surveyno = ?, subownershipcategory = ?, channel = ?, additionaldetail = ?,operationalArea = ?,noOfEmployees = ?,structureType = ?,adhocExemption = ?,adhocPenalty = ?,adhocExemptionReason = ?,adhocPenaltyReason = ?, businesssector=?, capitalinvestment=?, enterprisetype=?, lastmodifiedby = ?,  lastmodifiedtime = ?,  licenseunittype = ?, licenseunitid = ?, structureplacesubtype = ?, customdetailtype = ?, businessactivitydesc = ?, licenseetype = ? WHERE id = ?;
         basePath: Licenses.*.tradeLicenseDetail
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.surveyNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.subOwnerShipCategory

          - jsonPath: $.Licenses.*.tradeLicenseDetail.channel

          - jsonPath: $.Licenses.*.tradeLicenseDetail.additionalDetail
            type: JSON
            dbType: JSONB

          - jsonPath: $.Licenses.*.tradeLicenseDetail.operationalArea

          - jsonPath: $.Licenses.*.tradeLicenseDetail.noOfEmployees

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structureType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.adhocExemption

          - jsonPath: $.Licenses.*.tradeLicenseDetail.adhocPenalty

          - jsonPath: $.Licenses.*.tradeLicenseDetail.adhocExemptionReason

          - jsonPath: $.Licenses.*.tradeLicenseDetail.adhocPenaltyReason

          - jsonPath: $.Licenses.*.tradeLicenseDetail.businessSector

          - jsonPath: $.Licenses.*.tradeLicenseDetail.capitalInvestment

          - jsonPath: $.Licenses.*.tradeLicenseDetail.enterpriseType

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.licenseUnitType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.licenseUnitId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlaceSubtype
          
          - jsonPath: $.Licenses.*.tradeLicenseDetail.customDetailType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.businessActivityDesc

          - jsonPath: $.Licenses.*.tradeLicenseDetail.licenseeType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.id


       - query: INSERT INTO eg_tl_owner( id, tenantid, active, tradelicensedetailid, isprimaryowner, ownertype, ownershippercentage, relationship, ownername, aadharno, address, email, consentagreementplace, consentagreementdate, consentagreementenddate, createdby,lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT ON CONSTRAINT pk_eg_tl_owner DO UPDATE SET active = ?, isprimaryowner = ?, ownertype = ?, ownershippercentage = ?, relationship = ?, lastmodifiedby = ?,  lastmodifiedtime = ?, ownername = ?, aadharno = ?, address = ?, email = ?, consentagreementplace = ?, consentagreementdate = ?, consentagreementenddate = ?;
         basePath: Licenses.*.tradeLicenseDetail.owners.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.uuid

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.userActive

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.isPrimaryOwner

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.ownerType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.ownerShipPercentage

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.relationship

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.name

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.aadhaarNumber

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.permanentAddress

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.emailId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.consentAgreementPlace

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.consentAgreementDate

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.consentAgreementEndDate

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.userActive

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.isPrimaryOwner

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.ownerType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.ownerShipPercentage

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.relationship

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.name

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.aadhaarNumber

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.permanentAddress

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.emailId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.consentAgreementPlace

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.consentAgreementDate

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.consentAgreementEndDate


       - query: UPDATE eg_tl_address SET doorno =?,street = ?,buildingName = ?, latitude =?, longitude =?, addressid =?, addressnumber =?,locality =?, type =?, addressline1 =?, addressline2 =?, landmark =?, city =?, pincode =?, detail =?,lastmodifiedby =?, lastmodifiedtime =?, zonalid = ?, wardid = ?, wardno = ?, circledivisionid = ?, contactno = ?, email = ? WHERE id =?;
         basePath: Licenses.*.tradeLicenseDetail.address
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.doorNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.street

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.buildingName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.latitude

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.longitude

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.addressId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.addressNumber

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.locality.code

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.type

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.addressline1

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.addressline2

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.landmark

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.city

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.pincode

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.detail

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.zonalId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.wardId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.wardNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.circleDivisionId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.contactNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.email

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.id


       - query: UPDATE eg_tl_structureplacedetail SET tenantid=?, blockno=?, surveyno=?, subdivisionno=?, partitionno=?, doorno=?, doorsub=?, buildingid=?, vehicleno=?, vesselno=?, tradelicensedetailid=?, active=?, createdby=?, lastmodifiedby=?, createdtime=?, lastmodifiedtime=?, isresurveyed=?, waterplatform=? WHERE id =?;
         basePath: Licenses.*.tradeLicenseDetail.structurePlace
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.blockNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.surveyNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.subDivisionNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.partitionNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.doorNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.doorNoSub

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.buildingId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.vehicleNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.vesselNo

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.active

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.isResurveyed

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.waterPlatform

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.id


 - version: 1.0
   description: Persists tradeLicense details in EG_TL_TradeLicense  table
   fromTopic: update-tl-workflow
   isTransaction: true
   queryMaps:

       - query: INSERT INTO eg_tl_tradelicense_audit SELECT * FROM eg_tl_tradelicense WHERE id = ?;
         basePath: Licenses.*
         jsonMaps:
          - jsonPath: $.Licenses.*.id



       - query: INSERT INTO eg_tl_tradelicensedetail_audit SELECT * FROM eg_tl_tradelicensedetail WHERE id = ?;
         basePath: Licenses.*.tradeLicenseDetail
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.id



       - query: INSERT INTO eg_tl_verificationdocument( id, tenantid, active, documenttype, tradecategorydetail, filestoreid,tradelicensedetailid, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id) DO UPDATE SET active = ?,documenttype =?, tradecategorydetail =?, filestoreid =?, lastmodifiedby =?, lastmodifiedtime =?;
         basePath: Licenses.*.tradeLicenseDetail.verificationDocuments.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.documentType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.tradecategorydetail

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.fileStoreId

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.verificationDocuments[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.verificationDocuments[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.verificationDocuments[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.verificationDocuments[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.verificationDocuments[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.documentType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.tradecategorydetail

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.fileStoreId

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.verificationDocuments[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.verificationDocuments[*].id)].auditDetails.lastModifiedTime


       - query: UPDATE eg_tl_tradelicense SET validfrom = ?, validto = ?, licenseNumber =?, issueddate = ?, action = ?, status = ?,  lastmodifiedby = ?,  lastmodifiedtime = ? WHERE id=?;
         basePath: Licenses.*
         jsonMaps:
          - jsonPath: $.Licenses.*.validFrom

          - jsonPath: $.Licenses.*.validTo

          - jsonPath: $.Licenses.*.licenseNumber

          - jsonPath: $.Licenses.*.issuedDate

          - jsonPath: $.Licenses.*.action

          - jsonPath: $.Licenses.*.status

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.id


       - query: UPDATE eg_tl_tradelicensedetail SET additionaldetail = ?,lastmodifiedby = ?,  lastmodifiedtime = ? WHERE id = ?;
         basePath: Licenses.*.tradeLicenseDetail
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.additionalDetail
            type: JSON
            dbType: JSONB

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.id
